<<<<<<< HEAD
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CliniCon - Portal</title>
  <link rel="icon" href="assets/Bilder/CliniConLogo.png" />
  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
</head>
<body>
  <div class="shell">
    <aside class="side" aria-label="Hauptnavigation">
      <a class="brand" href="#" onclick="handleBrandClick(event); return false;">
        <img src="assets/Bilder/CliniConLogo.png" alt="CliniCon Logo" />
      </a>
      <nav class="nav" id="mainNav">
        <a href="#"
           data-key="start"
           data-path="pages/start.html"
           data-title="Start"
           data-subtitle="&Uuml;bersicht &amp; Schnellzugriff"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 11.5 12 4l9 7.5" />
            <path d="M5 10.5V20h14v-9.5" />
            <path d="M9 20v-5a3 3 0 0 1 6 0v5" />
          </svg>
          <span>Start</span>
        </a>
        <a href="#"
           data-key="dokumente"
           data-path="pages/dokumente.html"
           data-title="Roadmap und Updates"
           data-subtitle="Produktplanung &amp; Versionshinweise"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7 4.5h6.5L19 10v9.5a1.5 1.5 0 0 1-1.5 1.5H7A1.5 1.5 0 0 1 5.5 19.5v-13A1.5 1.5 0 0 1 7 5Z" />
            <path d="M13.5 4.5V10H19" />
            <path d="M8.5 13.5H15" />
            <path d="M8.5 17H15" />
          </svg>
          <span>Roadmap und Updates</span>
        </a>
        <a href="#"
           data-key="besetzungsbedarf"
           data-path="pages/besetzungsbedarf.html"
           data-title="Besetzungsbedarf"
           data-subtitle="Personalbedarf pro Einheit"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16v4H4z" />
            <path d="M4 10h10v10H4z" />
            <path d="M16 10h4v6h-4z" />
            <path d="M8 14h2" />
            <path d="M8 18h2" />
            <path d="M18 12v2" />
          </svg>
          <span>Besetzungsbedarf</span>
        </a>
        <a href="#"
           data-key="ppug"
           data-path="pages/ppug-rechner.html"
           data-title="PPUG-Rechner"
           data-subtitle="Untergrenzen berechnen"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3.5" y="4" width="17" height="13" rx="2" />
            <path d="M7 20h10" />
            <path d="M9 12h6" />
            <path d="M9 8h6" />
          </svg>
          <span>PPUG-Rechner</span>
        </a>
        <a href="#"
           data-key="ppbv"
           data-path="pages/ppbv-berechnung.html"
           data-title="PPBV-Berechner"
           data-subtitle="Parameter steuern &amp; vergleichen"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7 20V9" />
            <path d="M12 20V4" />
            <path d="M17 20v-6" />
            <path d="M5 20h14" />
          </svg>
          <span>PPBV-Berechner</span>
        </a>
        <a href="#"
           data-key="schichtmatrix"
           data-path="pages/schichtMatrix.html"
           data-title="Schichtmatrix"
           data-subtitle="Dienste &amp; VK-Bedarf kalkulieren"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 20V6" />
            <path d="M4 20h16" />
            <path d="M8 14.5 10.5 11l3 4 4-6" />
            <path d="M17 9h3v3" />
          </svg>
          <span>Schichtmatrix</span>
        </a>
        <a href="#"
           data-key="schichtbesetzung"
           data-path="pages/schichtbesetzung.html"
           data-title="Schichtbesetzung"
           data-subtitle="Planung &amp; Visualisierung"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h6v6H4z" />
            <path d="M14 4h6v6h-6z" />
            <path d="M4 14h6v6H4z" />
            <path d="M14 17h6" />
            <path d="M17 14v6" />
          </svg>
          <span>Schichtbesetzung</span>
        </a>
        <a href="#"
           data-key="gehaltsrechner"
           data-path="pages/gehaltsrechner.html"
           data-title="Gehaltsrechner"
           data-subtitle="AVR Caritas Anlage 31 (Pflegedienst)"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3.5" y="4.5" width="17" height="15" rx="2" />
            <path d="M7 8.5h10" />
            <path d="M7 12h4" />
            <path d="M7 15.5h6" />
          </svg>
          <span>Gehaltsrechner</span>
        </a>
        <a href="#"
           class="secure"
           data-key="login"
           data-path="pages/login.html"
           data-title="Interner Bereich"
           data-subtitle="Anmeldung erforderlich"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 3l7 4v5c0 5-3.5 9-7 10-3.5-1-7-5-7-10V7l7-4z" />
            <path d="M9 12l2 2 4-4" />
          </svg>
          <span>Interner Bereich</span>
        </a>
        <a href="#"
           class="nav-separator"
           data-key="produkt"
           data-path="pages/produkt.html"
           data-title="Produkt"
           data-subtitle="CliniCon im &Uuml;berblick"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3.5" y="4" width="17" height="13" rx="2" />
            <path d="M7 8h10" />
            <path d="M7 12h6" />
            <path d="M9 20h6" />
          </svg>
          <span>Produkt</span>
        </a>
        <a href="#"
           data-key="impressum"
           data-path="pages/impressum.html"
           data-title="Impressum"
           data-subtitle="Angaben gem&auml;&szlig; &sect; 5 TMG"
           onclick="handleNavClick(event,this);">
          <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 11.5v5" />
            <path d="M12 7h.01" />
            <rect x="4" y="3.5" width="16" height="17" rx="2" />
          </svg>
          <span>Impressum</span>
        </a>
      </nav>
    </aside>
    <div>
      <header class="topbar">
        <div class="topbar-left">
          <h1 id="pageHeading">CliniCon - Portal</h1>
          <p id="pageSubheading">W&auml;hlen Sie links eine Anwendung aus.</p>
        </div>
        <div class="mobile-nav">
          <select id="mobileNav" aria-label="Navigation">
          </select>
        </div>
        <img class="product-logo" src="assets/Bilder/CliniConLogo.png" alt="CliniCon Logo" />
      </header>

      <main id="mainContent" role="main" class="ppug-layout">
        <section class="card" style="text-align:center; padding:48px;">
          <h2>Willkommen bei CliniCon</h2>
          <p>Die Inhalte werden geladen. Bitte w&auml;hlen Sie eine Anwendung in der Navigation aus.</p>
        </section>
      </main>

      <footer>&copy; CliniCon</footer>
    </div>
  </div>

  <!-- Cookie Consent: Banner + Settings Modal -->
  <div id="cc-backdrop" class="cc-backdrop" aria-hidden="true"></div>

  <section id="cc-banner" class="cc-banner" role="dialog" aria-modal="true" aria-labelledby="cc-title" aria-hidden="true">
    <div class="cc-inner">
      <div class="cc-text">
        <h2 id="cc-title">Cookies &amp; Datenschutz</h2>
        <p>
          Wir verwenden technisch notwendige Cookies, um die Website sicher bereitzustellen.
          Mit Ihrer Einwilligung setzen wir zus&auml;tzlich Cookies f&uuml;r Statistik und Marketing, um unser Angebot zu verbessern.
          Details finden Sie in der <a id="cc-privacy-link" href="pages/impressum.html">Datenschutzerkl&auml;rung</a>.
        </p>
      </div>

      <div class="cc-actions">
        <button class="cc-btn cc-btn-secondary" id="cc-reject">Ablehnen</button>
        <button class="cc-btn cc-btn-secondary" id="cc-settings">Einstellungen</button>
        <button class="cc-btn cc-btn-primary" id="cc-accept">Alle akzeptieren</button>
      </div>
    </div>
  </section>

  <section id="cc-modal" class="cc-modal" role="dialog" aria-modal="true" aria-labelledby="cc-modal-title" aria-hidden="true">
    <div class="cc-modal-card">
      <div class="cc-modal-head">
        <h3 id="cc-modal-title">Cookie-Einstellungen</h3>
        <button class="cc-icon-btn" id="cc-close" aria-label="Schliessen">&times;</button>
      </div>

      <div class="cc-modal-body">
        <p class="cc-muted">
          Technisch notwendige Cookies sind immer aktiv. Statistik- und Marketing-Cookies werden nur mit Einwilligung gesetzt.
        </p>

        <div class="cc-toggle">
          <div>
            <strong>Notwendig</strong>
            <div class="cc-muted">Sicherheit, Seitennavigation, Basisfunktionen.</div>
          </div>
          <label class="cc-switch">
            <input type="checkbox" checked disabled />
            <span class="cc-slider"></span>
          </label>
        </div>

        <div class="cc-toggle">
          <div>
            <strong>Statistik</strong>
            <div class="cc-muted">Hilft uns zu verstehen, wie die Website genutzt wird.</div>
          </div>
          <label class="cc-switch">
            <input type="checkbox" id="cc-statistics" />
            <span class="cc-slider"></span>
          </label>
        </div>

        <div class="cc-toggle">
          <div>
            <strong>Marketing</strong>
            <div class="cc-muted">Personalisierung und Messung von Kampagnen (optional).</div>
          </div>
          <label class="cc-switch">
            <input type="checkbox" id="cc-marketing" />
            <span class="cc-slider"></span>
          </label>
        </div>

        <details class="cc-details">
          <summary>Technische Details</summary>
          <p class="cc-muted">
            Ihre Auswahl wird f&uuml;r 6 Monate gespeichert. Sie k&ouml;nnen diese jederzeit &uuml;ber &quot;Cookie-Einstellungen&quot; &auml;ndern.
          </p>
        </details>
      </div>

      <div class="cc-modal-actions">
        <button class="cc-btn cc-btn-secondary" id="cc-save">Auswahl speichern</button>
        <button class="cc-btn cc-btn-primary" id="cc-accept-2">Alle akzeptieren</button>
      </div>
    </div>
  </section>

  <button id="cc-open-link" class="cc-link-btn" type="button">Cookie-Einstellungen</button>

  <a class="donate-badge" id="donateBadge" href="#" target="_blank" rel="noopener" aria-label="Kaffee spendieren (PayPal)" title="Kaffee spendieren">
    <span class="donate-icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 8h1a4 4 0 1 1 0 8h-1" />
        <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z" />
        <path d="M6 1v3" />
        <path d="M10 1v3" />
        <path d="M14 1v3" />
      </svg>
    </span>
    <span class="donate-text">
      <span class="donate-label">Kaffee</span>
      <span class="donate-sub">spendieren</span>
    </span>
  </a>

  <script>
    const navLinks = () => Array.from(document.querySelectorAll('#mainNav a'));
    const mobileNav = () => document.getElementById('mobileNav');
    const scrollToTop = () => {
      window.scrollTo({ top: 0, left: 0, behavior: 'auto' });
      const main = document.getElementById('mainContent');
      if(main && typeof main.scrollTo === 'function'){
        main.scrollTo({ top: 0, left: 0, behavior: 'auto' });
      }
    };
    const TEXT_FIXES = [
      ['zun?chst','zunächst'],
      ['Arbeitspl?tze','Arbeitsplätze'],
      ['Krei?saal','Kreißsaal'],
      ['R?ntgen','Röntgen'],
      ['hinzuf?gen','hinzufügen'],
      ['durchf?hren','durchführen'],
      ['Ausf?llen','Ausfüllen'],
      ['Ausf?lle','Ausfälle'],
      ['Ben?tigte','Benötigte'],
      ['Gesamtberechnung durchf?hren','Gesamtberechnung durchführen'],
      ['weiteren Arbeitsplatz hinzuf?gen','weiteren Arbeitsplatz hinzufügen'],
      ['Fehlzeiten ?','Fehlzeiten ÷'],
      ['Einsatzbedarf ?','Einsatzbedarf ×'],
      ['Bruttobedarf ?','Bruttobedarf ×'],
      ['Feiertage ?','Feiertage –'],
      ['l?nder','länder'],
      ['f?r','für'],
      ['n?chsten','nächsten'],
      ['Menge ? Zeit','Menge × Zeit'],
      ['Baden-W?rttemberg','Baden-Württemberg'],
      ['Sachsen-Anhalt','Sachsen-Anhalt'],
      ['Th?ringen','Thüringen'],
      ['L?nderspezifische','Länderspezifische'],
      ['K?nige','Könige'],
      ['Ost-L?ndern','Ost-Ländern'],
      ['Bu?-','Buß-'],
      ['Mari?','Mariä'],
      ['vollst?ndig','vollständig'],
      ['Mo?Fr','Mo-Fr'],
      ['zus?tzlich','zusätzlich'],
      ['verf?gbare','verfügbare'],
      ['verf?gba','verfügba'],
      ['Abz?ge','Abzüge'],
      ['Hilfskr?fte','Hilfskräfte'],
      ['Pflegekr?fte','Pflegekräfte'],
      ['Verh?ltnis','Verhältnis'],
      ['zul?ssig','zulässig'],
      ['k?nnen','können'],
      ['VZ?','VZÄ'],
      ['Gr??e','Größe'],
      ['K?rper','Körper'],
      ['k?rper','körper'],
      ['Bezugsgr??e','Bezugsgröße']
    ];

    function normalizeTextContent(root){
      const walker = document.createTreeWalker(
        root,
        NodeFilter.SHOW_TEXT,
        {
          acceptNode(node){
            const parent = node.parentNode;
            if(!parent) return NodeFilter.FILTER_REJECT;
            const tag = parent.tagName;
            if(tag === 'SCRIPT' || tag === 'STYLE') return NodeFilter.FILTER_REJECT;
            return NodeFilter.FILTER_ACCEPT;
          }
        }
      );
      while(walker.nextNode()){
        const node = walker.currentNode;
        let value = node.nodeValue;
        let updated = value;
        TEXT_FIXES.forEach(([from,to])=>{
          if(updated.includes(from)){
            updated = updated.split(from).join(to);
          }
        });
        if(updated !== value){
          node.nodeValue = updated;
        }
      }
    }

    function resolveRelativeImages(root, basePath){
      const baseUrl = new URL(basePath, window.location.href);
      const images = root.querySelectorAll('img[src]');
      images.forEach(img => {
        const src = (img.getAttribute('src') || '').trim();
        if(!src) return;
        if(src.startsWith('#') || src.startsWith('data:') || src.startsWith('http://') || src.startsWith('https://') || src.startsWith('//')){
          return;
        }
        try{
          const resolved = new URL(src, baseUrl);
          img.setAttribute('src', resolved.href);
        }catch(_){}
      });
    }

    function syncMobileSelect(link){
      const select = mobileNav();
      if(select && link && link.dataset.key){
        select.value = link.dataset.key;
      }
    }


    function setActive(el){
      navLinks().forEach(a => a.classList.remove('active'));
      el.classList.add('active');
      syncMobileSelect(el);
    }

    async function loadPage(path, title, subtitle){
      const content = document.getElementById('mainContent');
      content.innerHTML = '<section class="card" style="text-align:center; padding:40px;">Inhalte werden geladen ...</section>';
      try{
        const res = await fetch(path);
        if(!res.ok) throw new Error('Seite nicht gefunden.');
        const html = await res.text();
        content.innerHTML = html;
        resolveRelativeImages(content, path);
        normalizeTextContent(content);
        const scripts = Array.from(content.querySelectorAll('script'));
        scripts.forEach(oldScript => {
          const newScript = document.createElement('script');
          Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
          newScript.textContent = oldScript.textContent;
          oldScript.replaceWith(newScript);
        });
        if(window.CCConsent && typeof window.CCConsent.refresh === 'function'){
          window.CCConsent.refresh();
        }
        document.getElementById('pageHeading').textContent = 'CliniCon - ' + title;
        document.getElementById('pageSubheading').textContent = subtitle || '';
        document.title = 'CliniCon - ' + title;
      }catch(err){
        content.innerHTML = '<section class="card" style="color:red; text-align:center;">'+err.message+'</section>';
      }
    }

    function navigate(link, push = true){
      const path = link.dataset.path;
      const title = link.dataset.title || link.textContent.trim();
      const subtitle = link.dataset.subtitle || '';
      if(!path) return;
      setActive(link);
      scrollToTop();
      loadPage(path, title, subtitle);
      if(push){
        const key = link.dataset.key || '';
        history.pushState({path, title, subtitle, key}, '', '#' + key);
      }
    }

    function handleNavClick(event, link){
      event.preventDefault();
      navigate(link);
    }

    function handleBrandClick(event){
      event.preventDefault();
      const startLink = document.querySelector('#mainNav a[data-key="start"]');
      if(startLink){
        navigate(startLink);
      }
    }

    window.addEventListener('popstate', (event) => {
      if(event.state){
        const { path, title, subtitle, key } = event.state;
        const active = key ? document.querySelector('#mainNav a[data-key="'+key+'"]') : null;
        if(active){
          setActive(active);
        }
        scrollToTop();
        loadPage(path, title, subtitle);
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      const donateUrl = (window.PAYPAL_DONATE_URL || '').trim();
      const donateBadge = document.getElementById('donateBadge');
      if(donateBadge){
        if(donateUrl){
          donateBadge.href = donateUrl;
        }else{
          donateBadge.removeAttribute('href');
          donateBadge.setAttribute('aria-disabled','true');
        }
      }
      const select = mobileNav();
      if(select){
        select.innerHTML = '';
        navLinks().forEach(link => {
          if(!link.dataset.key) return;
          const opt = document.createElement('option');
          opt.value = link.dataset.key;
          opt.textContent = link.textContent.trim();
          select.appendChild(opt);
        });
        select.addEventListener('change', () => {
          const key = select.value;
          const target = document.querySelector('#mainNav a[data-key="'+key+'"]');
          if(target){
            navigate(target);
          }
        });
      }
      const map = navLinks().reduce((acc, link) => {
        if(link.dataset.key){
          acc[link.dataset.key] = link;
        }
        return acc;
      }, {});
      const key = (location.hash || '#start').replace('#','');
      const normalizedKey = key === 'perzentilen' ? 'schichtmatrix' : key;
      const link = map[normalizedKey] || map.start;
      if(link){
        navigate(link, false);
        syncMobileSelect(link);
      }
      window.addEventListener('resize', () => {
        if(window.innerWidth <= 960){
          document.body.classList.add('is-mobile');
        }else{
          document.body.classList.remove('is-mobile');
        }
      });
      if(window.innerWidth <= 960){
        document.body.classList.add('is-mobile');
      }
    });
  </script>
  <script>
  /**
   * CliniCon Cookie Consent (standard)
   * - Speichert Entscheidung in cookie + localStorage
   * - Kategorien: necessary (always true), statistics, marketing
   * - Blockiert optionale Scripts ueber data-consent="statistics|marketing"
   */
  (function(){
    const CONSENT_KEY = "clinicon_cookie_consent_v1";
    const MAX_AGE_DAYS = 180;

    const els = {
      backdrop: document.getElementById("cc-backdrop"),
      banner: document.getElementById("cc-banner"),
      modal: document.getElementById("cc-modal"),
      reject: document.getElementById("cc-reject"),
      accept: document.getElementById("cc-accept"),
      settings: document.getElementById("cc-settings"),
      close: document.getElementById("cc-close"),
      save: document.getElementById("cc-save"),
      accept2: document.getElementById("cc-accept-2"),
      stat: document.getElementById("cc-statistics"),
      mkt: document.getElementById("cc-marketing"),
      openLink: document.getElementById("cc-open-link"),
      privacyLink: document.getElementById("cc-privacy-link")
    };

    function setCookie(name, value, days){
      const d = new Date();
      d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
      document.cookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}; expires=${d.toUTCString()}; path=/; SameSite=Lax`;
    }

    function getCookie(name){
      const needle = encodeURIComponent(name) + "=";
      const parts = document.cookie.split("; ");
      for(const p of parts){
        if(p.indexOf(needle) === 0) return decodeURIComponent(p.substring(needle.length));
      }
      return null;
    }

    function loadConsent(){
      try{
        const ls = localStorage.getItem(CONSENT_KEY);
        if(ls) return JSON.parse(ls);
      }catch(_){}

      const c = getCookie(CONSENT_KEY);
      if(c){
        try{ return JSON.parse(c); }catch(_){}
      }
      return null;
    }

    function saveConsent(consent){
      const payload = JSON.stringify({
        necessary: true,
        statistics: !!consent.statistics,
        marketing: !!consent.marketing,
        ts: Date.now()
      });

      try{ localStorage.setItem(CONSENT_KEY, payload); }catch(_){}
      setCookie(CONSENT_KEY, payload, MAX_AGE_DAYS);
    }

    function showBanner(){
      if(!els.banner) return;
      els.banner.style.display = "block";
      els.banner.setAttribute("aria-hidden", "false");
    }

    function hideBanner(){
      if(!els.banner) return;
      els.banner.style.display = "none";
      els.banner.setAttribute("aria-hidden", "true");
    }

    function openModal(){
      if(els.backdrop) els.backdrop.style.display = "block";
      if(els.modal) els.modal.style.display = "flex";
      if(els.backdrop) els.backdrop.setAttribute("aria-hidden", "false");
      if(els.modal) els.modal.setAttribute("aria-hidden", "false");
    }

    function closeModal(){
      if(els.backdrop) els.backdrop.style.display = "none";
      if(els.modal) els.modal.style.display = "none";
      if(els.backdrop) els.backdrop.setAttribute("aria-hidden", "true");
      if(els.modal) els.modal.setAttribute("aria-hidden", "true");
    }

    function showOpenLink(){
      if(els.openLink){
        els.openLink.style.transform = "translateY(0)";
      }
    }

    function applyConsent(consent){
      if(consent.statistics) enableScripts("statistics");
      if(consent.marketing) enableScripts("marketing");
    }

    function enableScripts(category){
      const nodes = document.querySelectorAll(`script[type="text/plain"][data-consent="${category}"]`);
      nodes.forEach(node => {
        const s = document.createElement("script");
        [...node.attributes].forEach(attr => {
          if(attr.name === "type") return;
          s.setAttribute(attr.name, attr.value);
        });
        s.text = node.text || "";
        node.parentNode.insertBefore(s, node);
        node.remove();
      });
    }

    function acceptAll(){
      const consent = { statistics: true, marketing: true };
      saveConsent(consent);
      applyConsent(consent);
      closeModal();
      hideBanner();
      showOpenLink();
    }

    function rejectAll(){
      const consent = { statistics: false, marketing: false };
      saveConsent(consent);
      closeModal();
      hideBanner();
      showOpenLink();
    }

    function saveSelection(){
      const consent = { statistics: !!(els.stat && els.stat.checked), marketing: !!(els.mkt && els.mkt.checked) };
      saveConsent(consent);
      applyConsent(consent);
      closeModal();
      hideBanner();
      showOpenLink();
    }

    els.accept?.addEventListener("click", acceptAll);
    els.accept2?.addEventListener("click", acceptAll);
    els.reject?.addEventListener("click", rejectAll);
    els.settings?.addEventListener("click", openModal);
    els.close?.addEventListener("click", closeModal);
    els.save?.addEventListener("click", saveSelection);
    els.backdrop?.addEventListener("click", closeModal);

    els.openLink?.addEventListener("click", () => {
      const existing = loadConsent();
      if(els.stat) els.stat.checked = !!(existing && existing.statistics);
      if(els.mkt) els.mkt.checked = !!(existing && existing.marketing);
      openModal();
    });

    if(els.privacyLink){
      els.privacyLink.addEventListener("click", (event) => {
        const navLink = document.querySelector('#mainNav a[data-key="impressum"]');
        if(navLink){
          event.preventDefault();
          navLink.click();
        }
      });
    }

    window.CCConsent = {
      refresh(){
        const consent = loadConsent();
        if(consent){
          applyConsent(consent);
        }
      },
      load: loadConsent
    };

    document.addEventListener("DOMContentLoaded", () => {
      const consent = loadConsent();
      if(!consent){
        showBanner();
        return;
      }
      if(els.stat) els.stat.checked = !!consent.statistics;
      if(els.mkt) els.mkt.checked = !!consent.marketing;
      applyConsent(consent);
      showOpenLink();
    });
  })();
  </script>
</body>
</html>
=======
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CliniCon – Tool</title>

  <style>
    :root{
      --bg:#f5f7fb; --panel:#ffffff; --muted:#94a3b8; --text:#0f172a; --line:#e2e8f0;
      --accent:#2563eb; --accent-weak:#dbeafe; --accent-strong:#1d4ed8;
      --success:#16a34a; --shadow:0 18px 36px rgba(15,23,42,.08);
      --gold:#facc15; --gold-strong:#eab308; --gold-bg:#fff8db;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--text); background:var(--bg);
    }

    .shell{display:grid; grid-template-columns:240px 1fr; min-height:100dvh}

    /* ==== Sidebar ==== */
    .side{
      position:sticky; top:0; height:100dvh; background:#ffffffcc; backdrop-filter:saturate(180%) blur(10px);
      border-right:1px solid var(--line); display:flex; flex-direction:column; align-items:stretch; gap:12px; padding:16px 12px;
      width:240px; overflow:auto
    }
    .brand{
      display:flex; align-items:center; justify-content:center; padding:8px 10px; width:100%; text-decoration:none
    }
    .brand img{width:180px; height:auto; object-fit:contain}

    .nav{display:flex; flex-direction:column; gap:8px; width:100%; margin-top:8px}

    /* Einheitliches Button-Design */
    .nav a{
      --bg1:#fff; --bg2:#f9fbff;
      display:flex; align-items:center; gap:12px;
      text-decoration:none; color:var(--text);
      padding:12px 14px; border-radius:14px; border:1px solid var(--line);
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      box-shadow:0 1px 0 rgba(15,23,42,.03);
      transition:.18s ease transform, .18s ease box-shadow, .18s ease border-color, .18s ease background;
    }
    .nav a:hover{
      transform:translateY(-1px);
      border-color:#bfd7ff;
      background:linear-gradient(180deg,#ffffff,#eef5ff);
      box-shadow:0 6px 14px rgba(37,99,235,.12);
    }
    .nav a.active{
      background:linear-gradient(180deg,#2563eb,#1d4ed8);
      color:#fff; border-color:transparent;
      box-shadow:0 10px 20px rgba(37,99,235,.25);
    }
    .nav a svg{
      width:22px; height:22px; flex:0 0 22px;
      opacity:.9
    }
    .nav a.active svg{ opacity:1; filter:brightness(10) }

    /* ==== Geschützter Bereich (Gold-Styling) ==== */
    .nav a.secure{
      background:linear-gradient(180deg,var(--gold-bg),#fffef4);
      border-color:#fde68a;
      color:#854d0e;
      font-weight:600;
    }
    .nav a.secure:hover{
      background:linear-gradient(180deg,#fff5b1,#fffef4);
      box-shadow:0 6px 14px rgba(250,204,21,.25);
      border-color:var(--gold);
      transform:translateY(-1px);
    }
    .nav a.secure.active{
      background:linear-gradient(180deg,var(--gold),var(--gold-strong));
      color:#fff;
      border:none;
      box-shadow:0 10px 22px rgba(250,204,21,.35);
    }

    header{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:16px; padding:20px 24px; border-bottom:1px solid var(--line); background:#fff; position:sticky; top:0; z-index:2
    }
    .topbar-left h1{ margin:0; font-size:1.6rem; letter-spacing:.02em }
    .topbar-left p{ margin:6px 0 0; color:var(--muted); font-size:.98rem }
    .product-logo{ height:56px; width:auto; object-fit:contain }

    main{ padding:24px; display:grid; gap:20px; grid-template-columns:repeat(12,1fr) }
    .card{ background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:24px; box-shadow:var(--shadow) }

    footer{ padding:18px 24px; color:var(--muted); text-align:right }

    @media (max-width: 960px){
      .shell{ grid-template-columns:1fr }
      .side{ position:relative; height:auto; width:100%; flex-direction:row; align-items:center; justify-content:space-between; padding:12px 16px }
      .nav{ flex-direction:row; overflow-x:auto; padding-bottom:4px }
      .nav a{ white-space:nowrap }
      header{ position:relative }
      main{ grid-template-columns:1fr; padding:20px }
    }
  </style>
</head>
<body>
  <div class="shell">
    <aside class="side" aria-label="Hauptnavigation">
      <a class="brand" href="index.html" aria-label="Startseite">
        <img src="Bilder/CliniConLogo.png" alt="CliniCon Logo" />
      </a>

      <nav class="nav" id="mainNav">
        <a href="index.html" data-key="index">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9.5L12 3l9 6.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z"/></svg>
          <span>Start</span>
        </a>
        <a href="0_PpUG-Rechner.html" data-key="ppug">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          <span>PPUG-Rechner</span>
        </a>
        <a href="0_PPBV-Berechnung.html" data-key="ppbv">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/></svg>
          <span>PPBV-Berechnung</span>
        </a>
        <a href="0_Schichtbesetzung.html" data-key="schichten">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          <span>Schichtbesetzung</span>
        </a>
        <a href="0_Besetzungsbedarf.html" data-key="bedarf">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          <span>Besetzungsbedarf</span>
        </a>
        <a href="0_Perzentilen-Berechnung.html" data-key="perzentilen">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="3" x2="3" y2="21"/><line x1="21" y1="21" x2="3" y2="21"/><rect x="7" y="10" width="3" height="7"/><rect x="12" y="6" width="3" height="11"/><rect x="17" y="13" width="3" height="4"/></svg>
          <span>Perzentilen</span>
        </a>

        <!-- Geschützter Bereich (neu, goldfarben) -->
        <a href="0_Login.html" class="secure" data-key="secure" aria-label="Geschützter Bereich">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="10" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span>Geschützter Bereich</span>
        </a>
      </nav>
    </aside>

    <div>
      <header>
        <div class="topbar-left">
          <h1 id="pageHeading">CliniCon – Das Krankenhaus-Management-Tool</h1>
          <p id="pageSubheading">Smarte Werkzeuge für Planung, Qualität und Navigation im Klinikalltag.</p>
        </div>
        <img class="product-logo" src="Bilder/CliniConLogo.png" alt="CliniCon Logo" />
      </header>

      <main id="main" role="main">
        <!-- PAGE CONTENT HERE -->
      </main>

      <footer>© CliniCon</footer>
    </div>
  </div>

  <script>
    (function(){
      const path = (location.pathname.split('/').pop() || '').toLowerCase();
      const map = {
        'index.html':'index',
        '0_ppug-rechner.html':'ppug',
        '0_ppbv-berechnung.html':'ppbv',
        '0_schichtbesetzung.html':'schichten',
        '0_besetzungsbedarf.html':'bedarf',
        '0_perzentilen-berechnung.html':'perzentilen',
        '1_unterstartseite.html':'secure'
      };
      const titles = {
        index:['Start','Übersicht & Schnellzugriff'],
        ppug:['PPUG-Rechner','Untergrenzen schnell prüfen'],
        ppbv:['PPBV-Berechnung','Parameter steuern & vergleichen'],
        schichten:['Schichtbesetzung','Planung & Visualisierung'],
        bedarf:['Besetzungsbedarf','Anforderung je Tag & Schicht'],
        perzentilen:['Perzentilen-Rechner','Wachstum verständlich darstellen'],
        secure:['Geschützter Bereich','Zugriff für autorisierte Nutzer']
      };
      const key = map[path] || null;
      if(key){
        const link = document.querySelector('.nav a[data-key="'+key+'"]');
        if(link) link.classList.add('active');
        if(titles[key]){
          document.getElementById('pageHeading').textContent = 'CliniCon – ' + titles[key][0];
          document.getElementById('pageSubheading').textContent = titles[key][1];
          document.title = 'CliniCon – ' + titles[key][0];
        }
      }
    })();
  </script>
</body>
</html>
>>>>>>> 4e1de755c5e9a3b0e4feae961b3dcb7b5d53fda7
